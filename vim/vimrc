" set up runtimepath
set runtimepath+=$XDG_CONFIG_HOME/vim

" set up pathogen
source $XDG_CONFIG_HOME/vim/bundle/vim-pathogen/autoload/pathogen.vim
execute pathogen#infect()

" Load custom ruby indentation before the default one kicks in and ruins the
" day. Also use proper variable based setting instead of stupid default one.
source $XDG_CONFIG_HOME/vim/bundle/vim-ruby/indent/ruby.vim
let g:ruby_indent_assignment_style = "variable"

" Enabling the rest of syntax highligting
syntax on
filetype plugin indent on

" color theme
colorscheme maui

" adequate tabs/spaces settings
set tabstop=2
set softtabstop=2
set shiftwidth=2
set expandtab

" https://stackoverflow.com/questions/4760428/how-can-i-make-vims-j-and-gq-commands-use-one-space-after-a-period
set nojoinspaces

" kill the swapfiles and backups
set nobackup
set nowritebackup
set noswapfile

" line numbers
set number

" display invisibles
set listchars=tab:▸\ ,eol:¬
set list!

" nice fonts for airline
let g:airline_powerline_fonts = 1

" highlight trailing whitespace
match ErrorMsg '\s\+$'

" kill trailing whitespace automatically
autocmd BufWritePre * :%s/\s\+$//e

" NotRocket command
command! -bar -range=% NotRocket :<line1>,<line2>s/:\(\w\+\)\s*=>/\1:/ge

" go imports
let g:go_fmt_command = "goimports"

" fzf binding
nmap <C-p> :FZF<CR>

" run rustfmt on save for rust files
let g:rustfmt_autosave = 1

" disable ex mode
nnoremap Q <Nop>

" Start interactive EasyAlign in visual mode (e.g. vipga)
xmap ga <Plug>(EasyAlign)
"
" Start interactive EasyAlign for a motion/text object (e.g. gaip)
nmap ga <Plug>(EasyAlign)

" vim-test
nmap <silent> t<C-n> :TestNearest<CR>
nmap <silent> t<C-f> :TestFile<CR>
let test#strategy = "asyncrun"
let g:asyncrun_open = 15
